/* administration_tfaSettings 9.16.4 2018-11-07T09:47:23+00:00 f3088a38af4a (release/9.16.0) tip */
!function(){"use strict";angular.module("c8y.parts.tfaSettings",[])}(),function(){"use strict";function t(t,n,a,e,i){function s(){n.isTfaAvailable().then(function(t){p.available=t}).then(l)}function l(){p.available&&_.forEach(S,r)}function r(t){var n={category:y,key:t.key},e=t.default,i=t.systemOption?a.getSystemOptionValue:a.detailValue;return i(n,e).then(_.partial(o,t))}function o(t,n){p[d(t.key)]=n}function d(t){return _.camelCase(t)}function c(n){var a=_.map(S,g);return t.all(a).then(function(){e.success(i("TFA settings updated successfully!")),n.$setPristine()})}function g(n){var e={category:y,key:n.key,value:u(n)};return f(n)?a.updateOption(e):t.when()}function u(t){return m(p[d(t.key)])}function m(t){var n=_.isNumber(t)||!isNaN(t)&&_.isString(t);return n?_.toNumber(t):t}function f(t){var n=t.readOnly,a=t.readOnlyIfTenantScopeSettingsDisabled&&!p.tenantScopeSettingsEnabled;return!t.systemOption&&!(n||a)}var p=this,v=/^[0-9]\d*$/,y="two-factor-authentication",S=[{systemOption:!0,key:"tenant-scope-settings.enabled",default:!1,readOnly:!0},{key:"enabled",default:!1},{key:"token.validity",default:43200,readOnlyIfTenantScopeSettingsDisabled:!0},{key:"pin.validity",default:30,readOnlyIfTenantScopeSettingsDisabled:!0}];_.assign(p,{$onInit:s,saveSettings:c,limitValidityRegex:v})}t.$inject=["$q","c8yUser","c8ySettings","c8yAlert","gettext"],angular.module("c8y.parts.tfaSettings").component("c8yTfaSettings",{controller:t,controllerAs:"vm",templateUrl:"administration_tfaSettings/tfa-settings.html"})}(),function(){"use strict";function t(t){var n;n='<div class="card">\n  <div class="card-header">\n    <h4 class="card-title" translate><span title="Two-factor authentication">TFA</span> settings</h4>\n  </div>\n  <hr>\n  <div class="card-block">\n    <div ng-if="!vm.available" class="alert alert-info">\n      <translate>TFA settings are not available for your tenant.</translate>\n    </div>\n    <form name="tfaSettingsForm" ng-submit="vm.saveSettings(tfaSettingsForm)" ng-if="vm.available">\n      <div class="form-group">\n        <label class="c8y-checkbox">\n          <input type="checkbox" ng-model="vm.enabled">\n          <span></span>\n          <span translate>Allow two-factor authentication</span>\n        </label>\n      </div>\n      <div ng-if="!vm.tenantScopeSettingsEnabled" class="alert alert-info">\n        <translate>The following settings are managed on platform level.</translate>\n      </div>\n      <div class="row">\n        <div class="col-sm-6">\n          <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.tokenValidity.$dirty && tfaSettingsForm.tokenValidity.$invalid}">\n            <label translate>Limit token validity for</label>\n            <div class="input-group">\n              <input class="form-control text-right" name="tokenValidity" maxlength="6" ng-model="vm.tokenValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" placeholder="{{\'e.g.\' | translate}} 43200" ng-required="vm.tenantScopeSettingsEnabled">\n              <span class="input-group-addon" translate>minutes</span>\n            </div>\n          </div>\n        </div>\n        <div class="col-sm-6">\n          <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.pinValidity.$dirty && tfaSettingsForm.pinValidity.$invalid}">\n            <label translate>Limit verification code validity for</label>\n            <div class="input-group">\n              <input class="form-control text-right" maxlength="6" name="pinValidity" ng-model="vm.pinValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" placeholder="{{\'e.g.\' | translate}} 30" ng-required="vm.tenantScopeSettingsEnabled">\n              <span class="input-group-addon" translate>minutes</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="tfaSettingsForm.$invalid || tfaSettingsForm.$pristine" translate>\n          Save TFA settings\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n',t.put("tfaSettings/tfa-settings.html",n),t.put("administration_tfaSettings/tfa-settings.html",n),t.put("/apps/administration/tfaSettings/tfa-settings.html",n)}angular.module("c8y.parts.tfaSettings").run(["$templateCache",t])}();