/* core_cell-id-information-activator 9.16.4 2018-11-07T09:47:31+00:00 f3088a38af4a (release/9.16.0) tip */
function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),c=o.value}catch(t){return void n(t)}return o.done?void t(c):Promise.resolve(c).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}!function(){"use strict";angular.module("c8y.cellIdInformationActivator",[])}();var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};!function(){"use strict";function t(t,e){var n={path:"/device/:deviceId/*",actionBar:!0};t.addUrlAction(_extends({},n,{text:e("Activate Cell ID information"),showIf:["$q","$routeParams","cellIdInformationActivator",function(t,e,n){"ngInject";return t.all({shown:n.shouldShowActivator(),activated:n.isActivatedFor(e.deviceId)}).then(function(t){var e=t.shown,n=t.activated;return e&&!n})}],action:["$routeParams","cellIdInformationActivator",function(t,e){"ngInject";e.activate(t.deviceId)}]})),t.addUrlAction(_extends({},n,{text:e("Deactivate Cell ID information"),showIf:["$q","$routeParams","cellIdInformationActivator",function(t,e,n){"ngInject";return t.all({shown:n.shouldShowActivator(),activated:n.isActivatedFor(e.deviceId)}).then(function(t){var e=t.shown,n=t.activated;return e&&n})}],action:["$routeParams","cellIdInformationActivator",function(t,e){"ngInject";e.deactivate(t.deviceId)}]}))}t.$inject=["c8yActionsProvider","gettext"],angular.module("c8y.cellIdInformationActivator").config(t)}(),function(){"use strict";function t(t,e,n,r,a,i,o,c){var u=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.detailValue({category:"cellid",key:"operation.mode"});case 2:return e=t.sent,t.abrupt("return","manual"===e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),s=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=_.isString(e),!t.t0){t.next=7;break}return t.t1=a,t.next=5,r.detail(e);case 5:t.t2=t.sent,t.t0=t.t1.getResData.call(t.t1,t.t2);case 7:return n=t.t0,t.abrupt("return",!!_.get(n,"c8y_CellIdFeatureActive"));case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),l=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(r,i){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d(r);case 3:if(u=n.sent,!u){n.next=10;break}return n.next=7,e.post(a.url("service/cellid/devices/"+i),{active:r});case 7:t.$broadcast("$routeChangeStart"),t.$broadcast("$routeChangeSuccess"),o.success(r?c.getString("Cell ID information activated"):c.getString("Cell ID information deactivated"));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0.data.message);case 15:case"end":return n.stop()}},n,this,[[0,12]])}));return function(t,e){return n.apply(this,arguments)}}(),d=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(v[e]);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e){return t.apply(this,arguments)}}(),v={true:{title:c.getString("Activate Cell ID information"),body:c.getString("Activating this feature will result in automatically updating the GPS position of the device when it sends new Cell ID data. Using this feature can result in additional costs."),status:"danger",labels:{ok:c.getString("Activate")}},false:{title:c.getString("Deactivate Cell ID information"),body:c.getString("Are you sure you want to deactivate Cell ID information for this device?"),status:"info",labels:{ok:c.getString("Deactivate")}}},f={shouldShowActivator:u,isActivatedFor:s,activate:_.curry(l)(!0),deactivate:_.curry(l)(!1)};return f}t.$inject=["$rootScope","$http","c8ySettings","c8yDevices","c8yBase","c8yModal","c8yAlert","gettextCatalog"],angular.module("c8y.cellIdInformationActivator").factory("cellIdInformationActivator",t)}(),function(){"use strict";function t(t){}angular.module("c8y.cellIdInformationActivator").run(["$templateCache",t])}();