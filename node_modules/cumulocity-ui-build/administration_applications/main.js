/* administration_applications 9.16.4 2018-11-07T09:47:21+00:00 f3088a38af4a (release/9.16.0) tip */
!function(){"use strict";function n(n,t,a,i,e){n.addNavigation({parent:{name:e("Applications"),icon:"c8y-atom"},name:e("Own applications"),path:"applications",icon:"c8y-modules",priority:4e3}),t.when("/applications",{template:'<c8y-application-list-view base-path="applications"></c8y-application-list-view>'}),t.when("/applications/:applicationId",{template:'<c8y-application-detail base-path="applications"></c8y-application-detail>',icon:"list",name:e("Properties"),priority:1e3}),t.when("/applications/:applicationId",{controller:"permissionsCtrl",templateUrl:"administration_applications/views/permissions.html",icon:"check-square-o",name:e("Permissions"),showIf:["$routeParams","c8yBase","c8yApplication",function(n,t,a){"ngInject";return a.detail(n.applicationId).then(t.getResData).then(function(n){return"MICROSERVICE"===n.type})}]}),n.addNavigation({parent:{name:e("Applications"),icon:"c8y-atom"},name:e("Subscribed applications"),path:"subscribedApplications",icon:"window-restore",priority:4e3}),t.when("/subscribedApplications",{template:'<c8y-application-list-view base-path="subscribedApplications"></c8y-application-list-view>'}),t.when("/subscribedApplications/:applicationId",{template:'<c8y-application-detail base-path="subscribedApplications"></c8y-application-detail>',icon:"list",name:e("Properties"),priority:1e3}),a.addTitle("/applications/:applicationId",{data:["$q",function(n){return n.when({templateUrl:"administration_applications/views/title.html"})}]}),a.addTitle("/subscribedApplications/:applicationId",{data:["$q",function(n){return n.when({templateUrl:"administration_applications/views/title.html"})}]}),i.addUrlAction({path:"/applications/:applicationId/*",text:e("Open"),actionBar:!0,position:"right",button:{cls:"default"},icon:"external-link",priority:2e3,showIf:["c8yApplication","$routeParams",function(n,t){return n.canOpenInBrowser(t.applicationId)}],action:["$routeParams","$window","c8yBase","c8yApplication",function(n,t,a,i){return i.detail(n.applicationId).then(a.getResData).then(function(n){t.location.href=i.getHref(n)})}]}),i.addUrlAction({path:"/applications/:applicationId",name:"subscribeAction",text:e("Subscribe"),actionBar:!0,position:"right",button:{cls:"default"},icon:"check-circle-o",priority:2e3,showIf:["c8yTenant","c8yApplication","$q","$routeParams","c8yBase",function(n,t,a,i,e){"ngInject";var r=this;return a.all({app:t.detail(i.applicationId).then(e.getResData),tenant:n.current(!0)}).then(function(n){var t=n.app,a=n.tenant;return _.assign(r,r.getTextAndIcon(r.isApplicationSubscribed(a,i.applicationId))),t.owner.tenant.id===a.name&&"MICROSERVICE"===t.type})}],action:["c8yTenant","c8yApplication","$q","$routeParams","c8yBase",function(n,t,a,i,e){"ngInject";var r=this;a.all({app:t.detail(i.applicationId).then(e.getResData),tenant:n.current(!0)}).then(function(t){var a=t.app,e=t.tenant,l=r.isApplicationSubscribed(e,i.applicationId),o=l?n.removeApplication(e.name,a):n.addApplication(e.name,a);return o.then(function(){return _.assign(r,r.getTextAndIcon(!l))})})}],isApplicationSubscribed:function(n,t){var a=n.applications.references;return a.some(function(n){var a=n.application;return a.id===t})},getTextAndIcon:function(n){var t={SUBSCRIBED:{text:e("Unsubscribe"),icon:"minus-circle"},NOT_SUBSCRIBED:{text:e("Subscribe"),icon:"check-circle-o"}};return t[n?"SUBSCRIBED":"NOT_SUBSCRIBED"]}}),i.addUrlAction({path:"/applications/:applicationId/*",text:e("Delete"),actionBar:!0,position:"right",button:{cls:"danger"},icon:"trash",priority:1e3,showIf:["$routeParams","c8yApplication",function(n,t){return t.getCurrent().then(function(t){return t.id!==n.applicationId})}],action:["$routeParams","$window","$location","c8yBase","c8yApplication","c8yModal","gettextCatalog",function(n,t,a,i,r,l,o){return r.detail(n.applicationId).then(i.getResData).then(function(n){return l({title:e("Confirm delete?"),body:o.getString('Do you really want to remove application "{{app | humanizeAppName}}"?',{app:n}),status:"danger"}).then(angular.bind(r,r.remove,n)).then(function(){a.path("/applications")})})}]})}n.$inject=["c8yNavigatorProvider","c8yViewsProvider","c8yTitleProvider","c8yActionsProvider","gettext"],angular.module("c8y.parts.applications",[]).config(n)}(),function(){"use strict";function n(n,t,a,i,e){function r(){t.applicationId&&i.detail(t.applicationId).then(a.getResData).then(function(n){o.app=n})}function l(){return e.getString('This application has been duplicated from "{{name}}" and won\'t get any further updates from the original app.',o.clonedFromApp)}var o=this;o.getClonedAppTooltip=l,n.$on("$routeChangeSuccess",r),r()}angular.module("c8y.parts.applications").controller("appDetailsTitleCtrl",["$rootScope","$routeParams","c8yBase","c8yApplication","gettextCatalog",n])}(),function(){"use strict";function n(n,t,a){function i(){e()}function e(){r().then(o)}function r(){return t.current().then(function(n){return a.listByUser(n).then(l)})}function l(n){return _.uniqBy(n,function(n){return n.id})}function o(t){n.applications=t}function p(){n.allowedApplications=n.allowedApplications||[]}function s(n){c(n)?d(n):u(n)}function c(t){return!!_.find(n.allowedApplications,function(n){return n.id==t.id})}function d(t){n.allowedApplications=_.filter(n.allowedApplications,function(n){return n.id!=t.id})}function u(t){p(),n.allowedApplications.push({id:t.id,type:t.type})}n.isAccessAllowed=c,n.toggleAccess=s,i()}angular.module("c8y.parts.applications").controller("applicationAccessEditorCtrl",["$scope","c8yUser","c8yApplication",n])}(),function(){"use strict";function n(n,t,a){function i(){e()}function e(){return t.detail(p).then(function(n){return n.data}).then(r)}function r(n){o.application=t.convertType(n),o.requiredRoles=l(o.application.requiredRoles),o.roles=l(o.application.roles)}function l(t){var a=n.convertServerPermissionsToUI(_.map(t,function(n){return{id:n}}));return a}var o=this,p=a.applicationId;_.assign(o,{$onInit:i})}n.$inject=["c8yPermissions","c8yApplication","$routeParams"],angular.module("c8y.parts.applications").controller("permissionsCtrl",n)}(),function(){"use strict";function n(){return{restrict:"A",scope:{allowedApplications:"=",disabledEdit:"=?"},templateUrl:"administration_applications/views/applicationAccessEditor.html",controller:"applicationAccessEditorCtrl"}}angular.module("c8y.parts.applications").directive("applicationAccessEditor",n)}(),function(){"use strict";function n(n,t,a){function i(){t.all(_.map(l,function(n){return a.configureVisibility(n,"show")})).then(function(n){r.methods=n})}function e(n){r.wizardCtrl.data.chosenMethod=n,r.wizardCtrl.goTo(n.nextStep)}var r=this,l=[{id:"APPLICATION_UPLOAD",label:n("Upload web application"),icon:"upload",nextStep:"upload",supportedFileTypes:["archive"],expectedType:"HOSTED",expectedExtension:"ZIP",invalidFileTypeMessage:n("Wrong file type! Expected a *.zip file with valid web application.")},{id:"MICROSERVICE_UPLOAD",label:n("Upload microservice"),icon:"share-square",nextStep:"upload",supportedFileTypes:["archive"],expectedType:"MICROSERVICE",expectedExtension:"ZIP",invalidFileTypeMessage:n("Wrong file type! Expected a *.zip file with valid microservice."),showIf:["c8yApplication",function(n){return n.isAvailable({name:"feature-microservice-hosting"})}]},{id:"EXTERNAL_APP_ADD",label:n("External application"),icon:"external-link-square",nextStep:"external"},{id:"CLONE_APP",label:n("Duplicate existing application"),icon:"copy",nextStep:"clone1"},{id:"CEP_RULE_UPLOAD",label:n("Upload custom Apama rule"),icon:"file-code-o",nextStep:"upload",supportedFileTypes:["epl"],expectedExtension:"mon",expectedType:"APAMA_CEP_RULE",invalidFileTypeMessage:n("Wrong file type! Expected a *.mon file with valid custom CEP rule."),showIf:["c8yApplication",function(n){return n.isAvailable(function(n){var t="MICROSERVICE"===n.type,a="cep"===n.contextPath,i=_.includes(n.name,"apama");return t&&a&&i})}]}];_.assign(r,{$onInit:i,chooseMethod:e})}n.$inject=["gettext","$q","c8yUiUtil"],angular.module("c8y.parts.applications").component("appWizardMenuStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardMenuStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a,i,e,r,l,o,p,s,c){function d(t){var a=n.defer();return W.deferred=a,W.cancelled&&a.reject({cancelled:!0}),n.when(t).then(a.resolve,a.reject),a.promise.catch(function(n){var t=n.cancelled;t&&(W.cancelled=t)}),U=function(){t.abort&&t.abort(),W.cancelled=!0,a.reject({cancelled:!0})},a.promise}function u(n){var t=void 0;return W.inProgress=!0,W.progress=0,W.cancelled=!1,x(n).then(f).then(function(){return b(n)}).then(function(n){t=n}).then(function(){return d(y(t))}).then(function(){return d(C(t,n))}).then(function(){return d(S(t))}).catch(function(n){t&&i.remove(t),m(n)}).finally(function(){W.inProgress=!1,W.progress=100})}function m(n){"typeValidation"===n.type?e.warning(n.message,n.details):n.cancelled||e.danger(v(n),g(n))}function v(n){var t=["data.message","data.error","errorMessage"],a=h(n,t)||s("An error has occurred");return r.translate(a)}function g(n){var t=["data.details","errorDetails"];return h(n,t)}function h(n,t){return _.head(_.compact(_.at(n,t)))}function f(t){var a=n.resolve();return _.get(I.wizardCtrl.data.chosenMethod,"expectedType")!==t&&(a=n.reject({type:"typeValidation",message:c.getString(I.wizardCtrl.data.chosenMethod.invalidFileTypeMessage)})),a}function y(t){return"MICROSERVICE"!==t.type?n.resolve():o({title:s("Subscribe microservice?"),size:"sm",labels:{ok:s("Subscribe"),cancel:s("Don't subscribe")},body:s("Do you want to subscribe the microservice after upload?"),status:"info"}).then(function(){return!0},function(){return!1}).then(function(n){I.activateAfterUpdate=n})}function b(n){var t={name:w(n),key:z(n),contextPath:z(n),manifest:{},resourcesUrl:"/"};return W.label=s("Creating application"),x(n).then(function(n){return t.type=n,t}).then(i.revertType).then(i.trySave).finally(function(){W.progress+=10})}function w(n){var t=n.name.split(".");return t.pop(),t.join(".")}function z(n){var t=w(n).toLowerCase();return A(t)}function A(n){return n.replace(/[^a-zA-Z0-9-_]/g,"")}function x(t){return"CEP_RULE_UPLOAD"===I.wizardCtrl.data.chosenMethod.id?n.when("APAMA_CEP_RULE"):l.getJsonData(t,{filename:"cumulocity.json"}).then(function(n){return _.get(n,"type")||(_.get(n,"apiVersion")?"MICROSERVICE":"HOSTED")}).catch(function(){return"HOSTED"})}function C(n,t){W.label=s("Uploading file");var e=i.uploadArchive(n,t);return e.progress(function(n){W.progress=10+n.loaded/n.total*90}).then(a.getResData).then(_.partial(i.setActiveArchive,n)).then(function(){return n}),e}function S(n){I.wizardCtrl.data.createdApp=n,"MICROSERVICE"===n.type?P(I.activateAfterUpdate,I.wizardCtrl.data.createdApp).then(function(){return I.wizardCtrl.goTo("success")}):"APAMA_CEP_RULE"===n.type?I.wizardCtrl.goTo("ruleDeployment"):I.wizardCtrl.goTo("APAMA_CEP_RULE"===n.type?"ruleDeployment":"success")}function P(t,a){return p.current(!0).then(function(i){var e=i.applications.references,r=e.some(function(n){var t=n.application;return t.id===a.id}),l=n.resolve();return!r&&t?l=p.addApplication(i.name,a):r&&!t&&(l=p.removeApplication(i.name,a)),l})}function E(){W.cancelled=!0,U&&U()}function k(n){E(),I.wizardCtrl.goTo(n)}var I=this,U=void 0,W={inProgress:!1,progress:0,label:null,deferred:null,cancelled:!1};_.assign(I,{processingStatus:W,createAppAndUploadArchive:u,goTo:k}),t.$parent.$on("modal.closing",E)}n.$inject=["$q","$scope","c8yBase","c8yApplication","c8yAlert","c8yServerMessages","c8yZip","c8yModal","c8yTenant","gettext","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardUploadStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardUploadStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a){function i(a){return a.manifest={},a.type="EXTERNAL",a=t.revertType(a),t.save(a).then(n.getResData).then(e)}function e(n){r.wizardCtrl.data.createdApp=n,r.wizardCtrl.goTo("success")}var r=this,l={required:a.getString("This field is required!"),maxlength:a.getString("Up to 120 characters allowed!"),url:a.getString("Valid URL required!")};_.assign(r,{invalid:n.invalidFormOrField,validationHints:_.partialRight(n.validationHints,l),save:i})}n.$inject=["c8yBase","c8yApplication","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardExternalStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardExternalStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n){function t(){a()}function a(){n.listByVisibleLinks().then(i)}function i(n){l.existingApps=n}function e(n){l.wizardCtrl.data.appClone=l.wizardCtrl.data.appClone||{},l.wizardCtrl.data.appClone.srcApp=n,l.wizardCtrl.data.appClone.destApp=r(n),l.wizardCtrl.goTo("clone2")}function r(n){var t,a=0;do a++,t={name:[n.name,a].join("-"),key:[n.key,a].join("-"),contextPath:[n.contextPath,a].join("-")};while(_.find(l.existingApps,t));return t}var l=this;_.assign(l,{$onInit:t,choose:e})}n.$inject=["c8yApplication"],angular.module("c8y.parts.applications").component("appWizardClone1Step",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardClone1Step.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t){function a(){return i.cloneInProgress=!0,t.clone(i.wizardCtrl.data.appClone.srcApp,i.wizardCtrl.data.appClone.destApp).then(function(n){i.wizardCtrl.data.createdApp=n,i.wizardCtrl.goTo("success")}).finally(function(){i.cloneInProgress=!1})}var i=this;_.assign(i,{host:n.host(),cloneInProgress:!1,clone:a})}n.$inject=["$location","c8yApplication"],angular.module("c8y.parts.applications").component("appWizardClone2Step",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardClone2Step.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a,i){function e(){var n=_.defaults(r.wizardCtrl.data.smartApp,o);return n.key=[n.path,"appkey",String(Math.random()).substr(2)].join("-"),n.manifest={imports:["core/c8yBranding"]},n.manifest.uiCreated=!0,a.save(n).then(t.getResData).then(function(n){r.wizardCtrl.data.createdApp=n,r.wizardCtrl.goTo("success")})}var r=this,l={required:i.getString("This field is required!"),maxlength:i.getString("Up to 120 characters allowed!"),url:i.getString("Valid URL required!")},o={type:"HOSTED",resourcesUrl:"https://bitbucket.org/m2m/cumulocity-ui/raw/default/build",resourcesUsername:"afwifawfoijafa",resourcesPassword:"kjijfgknnoippk"};_.assign(r,{host:n.host(),invalid:t.invalidFormOrField,validationHints:_.partialRight(t.validationHints,l),create:e})}n.$inject=["$location","c8yBase","c8yApplication","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardSmartAppStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardSmartAppStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a){function i(n){e.wizardCtrl.close(),t.open(a.getHref(n),"_blank")}var e=this;_.assign(e,{open:i,canOpenInBrowser:!1}),n.$watch(function(){return e.wizardCtrl.getCurrentStep()},function(n){"success"===_.get(n,"stepId")&&a.canOpenInBrowser(e.wizardCtrl.data.createdApp).then(function(n){e.canOpenInBrowser=n})})}n.$inject=["$scope","$window","c8yApplication"],angular.module("c8y.parts.applications").component("appWizardSuccessStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardSuccessStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a,i,e){function r(n,t){t.id!==p.wizardCtrl.data.createdApp.id||_.isUndefined(t.state)||(p.isLoading=!1,p.errors=t.state.errors,p.errors.forEach(function(n){e.add({type:"danger",text:n.message,noHtml:!0})}),p.errors.length>0&&l())}function l(){i.remove(p.wizardCtrl.data.createdApp)}function o(){a.destroySubscription(s,c)}var p=this,s=n.$id,c="/applications/*";_.assign(p,{canOpenInBrowser:!1,isLoading:!0,errors:[],$onDestroy:o}),n.$watch(function(){return p.wizardCtrl.getCurrentStep()},function(n){"ruleDeployment"===_.get(n,"stepId")&&(a.addListener(s,c,a.realtimeActions().UPDATE,r),a.start(s,c))})}n.$inject=["$scope","$window","c8yRealtime","c8yApplication","c8yAlert"],angular.module("c8y.parts.applications").component("appWizardRuleDeploymentStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardRuleDeploymentStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(){function n(n,a,i,e){function r(n){var a;return n.match(t)?(l.$setValidity("c8yApplicationContextPath",!0),a=n):l.$setValidity("c8yApplicationContextPath",!1),a}var l=e;l.$parsers.unshift(r)}var a={require:"ngModel",link:n};return a}var t=/^\S+$/;angular.module("c8y.parts.applications").directive("c8yApplicationContextPath",n)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(){"use strict";function n(n,t,a,i,e,r,l,o,p){function s(){g(),v()}function c(n){w.application=i.convertType(n),_.isUndefined(w.application.manifest)||"PER_TENANT"===w.application.manifest.isolation&&(w.singleTenant=!0)}function d(a){p.success(l("Application saved.")),w.isNew?n.path("/applications/"+a.id):t.reload()}function u(n){w.tenant=n.tenant}function m(n){n.length&&(w.file=n[0])}function v(){e.current().then(u)}function g(){var n=a.applicationId;n?i.detail(n).then(function(n){return n.data}).then(c).then(i.typeLabel):(w.isNew=!0,c({}))}function h(n){var t=_.cloneDeep(n);t.manifest||(t.manifest={});var a=t.type;"HOSTED"===a&&(t.resourcesUrl="/"),t=i.revertType(t);var e=i.save(t).then(r.getResData);return"HOSTED"===a&&w.file&&(e=e.then(function(n){return t=n,i.uploadArchive(t,w.file)}).then(r.getResData).then(function(n){return i.save(_.assign(t,{activeVersionId:n.id})).then(r.getResData)})),e.then(d)}function f(n){var t=[];return w[z][n]&&w[z][n].$error&&_.forEach(w[z][n].$error,function(a,i){a&&(_.isUndefined(x[i])||("object"===_typeof(x[i])?x[i][n]&&t.push(x[i][n]):t.push(x[i])))}),t.join(" ")}function y(){return l(b()?"Subscribed applications":"Own applications")}function b(){return w.basePath===A}var w=this,z="applicationForm",A="subscribedApplications",x={required:o.getString("This field is required!"),maxlength:o.getString("Up to 120 characters allowed!"),url:o.getString("Valid URL required!")};_.assign(w,{$onInit:s,icon:i.icon,typeLabel:i.typeLabel,invalid:angular.bind(r,r.invalid,w,"applicationForm"),validationHints:f,save:h,onFileSelect:m,host:n.host(),breadcrumbsLabel:y,isPlatformApplicationBasePath:b})}n.$inject=["$location","$route","$routeParams","c8yApplication","c8yUser","c8yBase","gettext","gettextCatalog","c8yAlert"],angular.module("c8y.parts.applications").component("c8yApplicationDetail",{bindings:{basePath:"@"},templateUrl:"administration_applications/application-detail/application-detail.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,t,a,i,e,r,l,o,p,s,c){function d(){m()}function u(t){return U.applications||(U.applications=[]),t.forEach(function(n){U.applications.push(n)}),n.paging=t.paging,U.applications.length}function m(n){delete U.applications,i.getCurrent().then(v),I()?c.current().then(function(n){var t={subscriber:n.name,pageSize:100,withTotalPages:!0};i.listApplications(t).then(function(t){return g(t,n.name)}).then(u).then(S)}):i.listByOwner(n).then(u).then(S)}function v(n){U.currentApp=n}function g(n,a){return t.resolve(_.filter(n,function(n){var t=h(n);return t!==a}))}function h(n){return _.get(n,"owner.tenant.id")}function f(n){a.path("/"+U.basePath+"/"+n.id)}function y(n){a.path("/"+U.basePath+"/"+n.id+"/plugins")}function b(){a.path("/"+U.basePath+"/new")}function w(){return r.open({templateUrl:"administration_applications/appWizard/wizard.html"}).result.then(x)}function z(n){e({title:p("Confirm application removal?"),body:s.getString('Do you really want to remove application "{{appName}}"?',{appName:n.name}),size:"sm",labels:{ok:p("Remove")},status:"danger"}).then(angular.bind(i,i.remove,n)).then(angular.bind(l,l.removeFromList,U.applications,n)).then(S)}function A(){n.paging.loading=!0,n.paging.next().then(u).then(S).finally(function(){n.paging.loading=!1})}function x(){U.applications=null,n.refreshLoading=!0,n.paging.refresh().then(u).then(S).finally(function(){n.refreshLoading=!1}),n.paging=null}function C(n){return _.includes(["HOSTED","MICROSERVICE"],n.type)?n.contextPath:n.externalUrl}function S(){o.changeTitle(P())}function P(){var n=U.applications.length,a=p(I()?"Subscribed applications":"Own applications"),i=_.isUndefined(n)?"":s.getPlural(n,"1 application","{{$count}} applications",{});return t.resolve({title:a,subtitle:i})}function E(n){return Boolean(U.currentApp&&U.currentApp.id===n.id)}function k(n){var t={result:!1};return i.canOpenInBrowser(n).then(function(n){t.result=n}),t}function I(){return U.basePath===W}var U=this,W="subscribedApplications";n.refresh=x,_.assign(U,{$onInit:d,getHref:i.getHref,detail:f,detailPlugins:y,add:b,addWithWizard:w,onClickDelete:z,loadNext:A,path:C,iconType:i.icon,isCurrentApp:E,canOpenInBrowser:_.memoize(k,function(n){return n.id}),isPlatformApplicationBasePath:I})}n.$inject=["$scope","$q","$location","c8yApplication","c8yModal","c8yWizardModal","c8yBase","c8yTitle","gettext","gettextCatalog","c8yTenant"],angular.module("c8y.parts.applications").component("c8yApplicationListView",{bindings:{basePath:"@"},templateUrl:"administration_applications/application-list-view/application-list-view.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n){var t;t='<c8y-breadcrumbs-set>\n  <c8y-breadcrumbs-item path="#{{vm.basePath}}" label="{{vm.breadcrumbsLabel() | translate}}" icon="c8y-modules"></c8y-breadcrumbs-item>\n</c8y-breadcrumbs-set>\n\n<div class="row">\n  <form name="vm.applicationForm" novalidate class="col-md-8 col-sm-12 col-lg-6">\n    <div class="card">\n      <div class="card-block">\n        <div class="row">\n          <div class="col-sm-5">\n            <div class="form-group">\n              <label>{{\'ID\' | translate}}</label>\n              <input type="text" ng-model="vm.application.id" class="disabled form-control" disabled="disabled">\n            </div>\n          </div>\n          <div class="col-sm-7">\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'name\')}">\n              <label>{{\'Name\' | translate}}</label>\n              <input ng-disabled="vm.application.type === \'MICROSERVICE\'" type="text" ng-model="vm.application.name" name="name" placeholder="{{\'e.g. My application\' | translate}}" ng-readonly="vm.isPlatformApplicationBasePath()" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(\'name\')}}">\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-5">\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'key\')}">\n              <label>{{\'Application key\' | translate}}</label>\n              <input type="text" name="key" class="form-control" ng-model="vm.application.key" ng-maxlength="120" ng-readonly="vm.application.id || vm.isPlatformApplicationBasePath()" placeholder="{{\'e.g. my-application-key\' | translate}}" required uib-tooltip="{{vm.validationHints(\'key\')}}">\n            </div>\n          </div>\n\n          <div class="col-sm-7">\n            <div class="form-group">\n              <label>{{\'Type\' | translate}}</label>\n              <div>\n                <div ng-if="vm.application.id">\n                  <p class="form-control-static">\n                    <i c8y-icon="{{vm.icon(vm.application)}}"></i>\n                    <span ng-bind="vm.typeLabel(vm.application) | translate"/>\n                  </p>\n                </div>\n\n                <div class="btn-group" ng-show="vm.isNew">\n                  <button type="button" class="btn btn-default btn-sm" ng-model="vm.application.type" uib-btn-radio="\'HOSTED\'">\n                    <i c8y-icon="cloud"></i>\n                    <span ng-bind="vm.typeLabel(\'HOSTED\') | translate"/>\n                  </button>\n                  <button type="button" class="btn btn-default btn-sm" ng-model="vm.application.type" uib-btn-radio="\'REPOSITORY\'">\n                    <i c8y-icon="bitbucket"></i>\n                    <span ng-bind="vm.typeLabel(\'REPOSITORY\') | translate"/>\n                  </button>\n                  <button type="button" class="btn btn-default btn-sm" ng-model="vm.application.type" uib-btn-radio="\'EXTERNAL\'">\n                    <i c8y-icon="external-link-square"></i>\n                    <span ng-bind="vm.typeLabel(\'EXTERNAL\') | translate"/>\n                  </button>\n                  <button type="button" class="btn btn-default btn-sm" ng-model="vm.application.type" uib-btn-radio="\'MICROSERVICE\'">\n                    <i c8y-icon="microchip"></i>\n                    <span ng-bind="vm.typeLabel(\'MICROSERVICE\') | translate"/>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div ng-switch="vm.application.type">\n          <div ng-switch-when="HOSTED">\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'contextPath\')}">\n              <label>{{\'Path\' | translate}}</label>\n              <div class="input-group">\n                <span class="input-group-addon">{{host}}/apps/</span>\n                <input type="text" name="contextPath" class="form-control" ng-model="vm.application.contextPath" placeholder="{{\'e.g. my-application\' | translate}}" required ng-readonly="vm.application.id || vm.isPlatformApplicationBasePath()" ng-maxlength="120" uib-tooltip="{{vm.validationHints(\'contextPath\')}}">\n              </div>\n            </div>\n\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'resourcesUrl\')}" ng-if="vm.isNew">\n              <label>{{\'Archive\' | translate}}</label>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Compressed files must have an index.html at root. URLs in the web application can be relative.\' | translate}}"></i>\n              <div class="input-group">\n                <input type="text" readonly="readonly" required class="form-control" ng-model="vm.file.name" placeholder="{{\'Select file\' | translate}}">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" ng-file-select="vm.onFileSelect($files)">\n                    <span><i c8y-icon="upload"></i></span>\n                </button>\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div ng-switch-when="MICROSERVICE">\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'contextPath\')}">\n              <label>{{\'Path\' | translate}}</label>\n              <div class="input-group">\n                <span class="input-group-addon">{{vm.host}}/service/</span>\n                <input type="text" name="contextPath" class="form-control" ng-model="vm.application.contextPath" placeholder="{{\'e.g. my-service\' | translate}}" required ng-readonly="vm.application.id || vm.isPlatformApplicationBasePath()" ng-maxlength="120" uib-tooltip="{{vm.validationHints(\'contextPath\')}}">\n              </div>\n            </div>\n\n            <ul class="list-inline">\n              <li ng-if="vm.application.manifest.version">\n                <div class="form-group">\n                  <label translate>Version</label>\n                  <p class="form-control-static"> {{vm.application.manifest.version}}</p>\n                </div>\n              </li>\n              <li ng-if="vm.application.manifest.isolation">\n                <div class="form-group">\n                  <label translate>Isolation</label>\n                  <p class="form-control-static"> \n                    <span ng-show="vm.singleTenant">\n                      <i c8y-icon="c8y-enterprise" class="c8y-icon-duocolor h4"></i> {{\'Single tenant\' | translate}}\n                    </span>    \n                    <span ng-show="!vm.singleTenant">\n                      <i c8y-icon="c8y-sub-tenants" class="c8y-icon-duocolor h4"></i> {{\'Multi tenant\' | translate}}\n                    </span>\n                  </p>\n                </div>\n              </li>\n            </ul>  \n\n            <div class="legend form-block top-m-xxl" ng-if="vm.application.manifest.provider">{{\'Provider\' | translate}}</div>\n            <ul class="list-inline">\n              <li ng-if="vm.application.manifest.provider.name">\n                <div class="form-group">\n                  <label translate>Name</label>\n                  <p class="form-control-static"> {{vm.application.manifest.provider.name}}</p>\n                </div>\n              </li>\n              <li ng-if="vm.application.manifest.provider.domain">\n                <div class="form-group">\n                  <label translate>Domain</label>\n                  <p class="form-control-static">{{vm.application.manifest.provider.domain}}</p>\n                </div>\n              </li>\n              <li ng-if="vm.application.manifest.provider.support">\n                <div class="form-group">\n                  <label translate>Support</label>\n                  <p class="form-control-static">{{vm.application.manifest.provider.support}}</p>\n                </div>\n              </li>\n            </ul>  \n          </div>\n\n          <div ng-switch-when="REPOSITORY">\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'contextPath\')}">\n              <label>{{\'Path\' | translate}}</label>\n              <div class="input-group">\n                <span class="input-group-addon">{{vm.host}}/apps/</span>\n                <input type="text" name="contextPath" class="form-control" ng-model="vm.application.contextPath" placeholder="{{\'e.g. my-application\' | translate}}" required ng-readonly="vm.application.id || vm.isPlatformApplicationBasePath()" ng-maxlength="120" uib-tooltip="{{vm.validationHints(\'contextPath\')}}">\n              </div>\n            </div>\n\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'resourcesUrl\')}">\n              <label>{{\'Server URL\' | translate}}</label>\n              <input type="url" name="resourcesUrl" class="form-control" ng-model="vm.application.resourcesUrl" uib-tooltip="{{vm.validationHints(\'resourcesUrl\')}}" placeholder="{{\'e.g.\' | translate}} /" required>\n            </div>\n\n            <div class="form-group">\n              <label translate>Username</label>\n              <input type="text" class="form-control" ng-model="vm.application.resourcesUsername" c8y-autocomplete="off">\n            </div>\n\n            <div class="form-group">\n              <label translate>Password</label>\n              <input type="text" class="form-control" ng-model="vm.application.resourcesPassword" c8y-autocomplete="off">\n            </div>\n\n          </div>\n\n          <div ng-switch-when="EXTERNAL">\n\n            <div class="form-group" ng-class="{\'has-error\': vm.invalid(\'externalUrl\')}">\n              <label>{{\'External URL\' | translate}}</label>\n              <input type="url" name="externalUrl" class="form-control" ng-model="vm.application.externalUrl" placeholder="{{\'e.g.\' | translate}} http://www.example.com/" required uib-tooltip="{{vm.validationHints(\'externalUrl\')}}">\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n      <div class="card-footer separator">\n        <button class="btn btn-primary btn-form" ng-click="vm.save(vm.application)" ng-show="vm.application && !vm.isPlatformApplicationBasePath()" ng-disabled="!vm.application.type || vm.applicationForm.$invalid || vm.applicationForm.$pristine" translate>\n          Save\n        </button>\n      </div>\n    </div>\n    <!-- /.card -->\n  </form>\n</div>\n',
n.put("applications/application-detail/application-detail.html",t),n.put("administration_applications/application-detail/application-detail.html",t),n.put("/apps/administration/applications/application-detail/application-detail.html",t),t='<div>\r\n\r\n  <c8y-ui-action-bar-set>\r\n    <c8y-refresh-btn></c8y-refresh-btn>\r\n  </c8y-ui-action-bar-set>\r\n\r\n\r\n    <div class="c8y-empty-state text-center" ng-show="vm.applications.length == 0">\r\n      <h1 class="c8y-icon c8y-icon-administration c8y-icon-duocolor"></h1>\r\n      <h3 translate>No applications found.</h3>\r\n      <div ng-if="!vm.isPlatformApplicationBasePath()">\r\n        <p translate>Start by adding your first application.</p>\r\n        <p><button type="button" class="btn btn-primary" ng-click="vm.addWithWizard()" translate>Add application</button></p>\r\n        <p c8y-guide-docs><small translate>Find out more on <a c8y-guide-href="concepts/applications/">User guide</a>.</small></p>\r\n      </div>\r\n    </div>\r\n\r\n  <div class="card-group interact-grid">\r\n    <div class="col-xs-12 col-sm-4 col-md-3 col-lg-2" ng-if="vm.applications.length > 0 && !vm.isPlatformApplicationBasePath()">\r\n      <a href="" class="card add-card" ng-click="vm.addWithWizard()">\r\n        <i c8y-icon="plus-square" class="text-muted"></i><br/>\r\n        <translate>Add application</translate>\r\n      </a>\r\n    </div>\r\n    <div ng-repeat="app in vm.applications" class="col-xs-12 col-sm-4 col-md-3 col-lg-2">\r\n      <div class="card" ng-click="vm.detail(app)">\r\n\r\n        <div class="dropdown card-actions" uib-dropdown ng-click="$event.stopPropagation()" ng-if="!vm.isPlatformApplicationBasePath()">\r\n          <button type="button" title="{{\'Settings\' | translate}}" class="dropdown-toggle c8y-dropdown" uib-dropdown-toggle>\r\n            <i c8y-icon="ellipsis-v"></i>\r\n          </button>\r\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\r\n            <li>\r\n              <a href="" ng-click="vm.detail(app)">\r\n                <i c8y-icon="edit"></i> <translate>Edit</translate>\r\n               </a>\r\n            </li>\r\n            <li ng-if="!vm.isCurrentApp(app)">\r\n              <a href="" ng-click="vm.onClickDelete(app)">\r\n                <i c8y-icon="times"></i> <translate>Remove</translate>\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n\r\n        <div class="card-block text-center">\r\n          <h1 style="margin: 15px 0  5px; font-size: 42px"><c8y-app-icon app="app"></c8y-app-icon></h1>\r\n          <p ng-bind="app | humanizeAppName" style="word-wrap: break-word" class="e2e-appCardName"></p>\r\n          <p class="text-truncate">\r\n            <i c8y-icon="{{vm.iconType(app)}}" class="text-muted"></i>\r\n            <small class="text-muted" ng-bind="vm.path(app)"></small>\r\n          </p>\r\n        </div>\r\n\r\n\r\n        <div ng-if="vm.canOpenInBrowser(app).result" class="card-actions-group" ng-click="$event.stopPropagation()">\r\n          <a ng-if="vm.canOpenInBrowser(app).result" ng-href="{{vm.getHref(app)}}" target="_blank">\r\n            <i c8y-icon="external-link"></i>\r\n            <translate>Open</translate>\r\n          </a>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <c8y-load-more></c8y-load-more>\r\n\r\n</div>\r\n',n.put("applications/application-list-view/application-list-view.html",t),n.put("administration_applications/application-list-view/application-list-view.html",t),n.put("/apps/administration/applications/application-list-view/application-list-view.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n      <i c8y-icon="copy"></i> <span translate>Duplicate application</span>\n  </div>\n  <hr style="margin:0">\n\n  <div class="modal-inner-scroll">\n    <div class="c8y-wizard-list-nav">\n      <a href="" class="list-group-item text-truncate" ng-repeat="app in vm.existingApps | orderBy:\'name | humanizeAppName\'" ng-click="vm.choose(app)">\n        <c8y-app-icon app="app" class="list-group-icon"></c8y-app-icon>\n        <span ng-bind="app | humanizeAppName"></span>\n      </a>\n    </div>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(\'menu\')" translate>Back</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardClone1Step.html",t),n.put("administration_applications/appWizard/appWizardClone1Step.html",t),n.put("/apps/administration/applications/appWizard/appWizardClone1Step.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <i c8y-icon="copy"></i> <span translate>Duplicate application</span>\n  </div>\n  <hr style="margin:0">\n  <div class="c8y-wizard-body">\n    <h4 class="app-title flex-row flex-center">\n      <c8y-app-icon app="vm.wizardCtrl.data.appClone.srcApp" class="right-m-sm"></c8y-app-icon>\n      <span ng-bind="vm.wizardCtrl.data.appClone.srcApp | humanizeAppName"></span>\n    </h4>\n  </div>\n\n  <form name="appCloneForm" class="c8y-wizard-form">\n    <div>\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'name\')}">\n        <label for="name"><span translate>Name</span></label>\n        <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.appClone.destApp.name" placeholder="{{\'e.g. My application\' | translate}}" required ng-maxlength="120" class="form-control" uib-tooltip="{{validationHints(\'name\')}}">\n      </div>\n\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'key\')}">\n        <label for="key"><span translate>Application key</span></label>\n        <input type="text" class="form-control" id="key" name="key" ng-model="vm.wizardCtrl.data.appClone.destApp.key" ng-maxlength="120" placeholder="{{\'e.g. my-application-key\' | translate}}" required uib-tooltip="{{validationHints(\'key\')}}">\n      </div>\n\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'contextPath\')}">\n        <label for="contextPath"><span translate>Path</span></label>\n        <div class="input-group">\n          <span class="input-group-addon">{{ctrl.host}}/apps/</span>\n          <input type="text" class="form-control" id="contextPath" name="contextPath" ng-model="vm.wizardCtrl.data.appClone.destApp.contextPath" placeholder="{{\'e.g. my-application\' | translate}}" required ng-maxlentgh="120" uib-tooltip="{{validationHints(\'contextPath\')}}" c8y-application-context-path>\n        </div>\n      </div>\n    </div>\n    <c8y-rectangle-spinner class="c8y-wizard-processing" ng-show="vm.cloneInProgress">\n    </c8y-rectangle-spinner>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(\'clone1\')" ng-disabled="vm.cloneInProgress" translate>Back</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" ng-disabled="vm.cloneInProgress" translate>Cancel</button>\n    <button class="btn btn-primary" ng-click="vm.clone(); processing = true;" ng-disabled="appCloneForm.$invalid || vm.cloneInProgress" translate>Duplicate</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardClone2Step.html",t),n.put("administration_applications/appWizard/appWizardClone2Step.html",t),n.put("/apps/administration/applications/appWizard/appWizardClone2Step.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <i c8y-icon="external-link-square"></i> <span translate>External application</span>\n  </div>\n\n  <form name="externalAppForm" class="c8y-wizard-form">\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.name)}">\n      <label for="name"><span translate>Name</span></label>\n      <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.externalApp.name" placeholder="{{\'e.g. My external application\' | translate}}" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(externalAppForm.name)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.key)}">\n      <label for="key"><span translate>Application key</span></label>\n      <input type="text" class="form-control" id="key" name="key" ng-model="vm.wizardCtrl.data.externalApp.key" ng-maxlength="120" placeholder="{{\'e.g. my-external-application-key\' | translate}}" required uib-tooltip="{{vm.validationHints(externalAppForm.key)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.externalUrl)}">\n      <label for="externalUrl"><span translate>External URL</span></label>\n      <input type="url" id="externalUrl" name="externalUrl" class="form-control" ng-model="vm.wizardCtrl.data.externalApp.externalUrl" placeholder="{{\'e.g.\' | translate}} http://www.example.com" required uib-tooltip="{{vm.validationHints(externalAppForm.externalUrl)}}">\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(\'menu\')" translate>Back</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n    <button class="btn btn-primary" ng-click="vm.save(vm.wizardCtrl.data.externalApp)" ng-disabled="externalAppForm.$invalid" translate>Save</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardExternalStep.html",t),n.put("administration_applications/appWizard/appWizardExternalStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardExternalStep.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <span translate>Choose method</span>\n  </div>\n  <hr style="margin:0">\n  <div class="modal-inner-scroll">\n    <div class="c8y-wizard-list-nav">\n      <a href="" class="list-group-item" ng-repeat="method in vm.methods" ng-show="method.show" ng-click="vm.chooseMethod(method)">\n        <span class="list-group-icon">\n          <i c8y-icon="{{method.icon}}"></i>\n        </span>\n        <span ng-bind="method.label | translate"></span>\n      </a>\n    </div>\n\n  </div>\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardMenuStep.html",t),n.put("administration_applications/appWizard/appWizardMenuStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardMenuStep.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <span ng-bind="vm.wizardCtrl.data.chosenMethod.label | translate"></span>\n  </div>\n\n  <div class="c8y-wizard-body">\n    <div class="text-center bottom-m" ng-if="vm.isLoading">\n      <div class="spinner" style="position: static">\n        <div class="rect1"></div>\n        <div class="rect2"></div>\n        <div class="rect3"></div>\n        <div class="rect4"></div>\n        <div class="rect5"></div>\n      </div>\n      <span style="font-size: 20pt" class="text-primary" translate>Please wait</span>\n      <br/>\n      <span translate>\n        The Apama rule is getting deployed to the server.\n      </span>\n    </div>\n\n    <div class="text-center bottom-m" ng-if="!vm.isLoading && vm.errors.length === 0">\n      <i c8y-icon="check-circle-o" class="text-success" style="font-size: 5em"></i>\n      <br/>\n      <span style="font-size: 20pt" class="text-success" translate>Done</span>\n      <br/>\n      <span translate>\n        Your rule is deployed.\n      </span>\n    </div>\n\n    <div class="text-center bottom-m" ng-if="!vm.isLoading && vm.errors.length > 0">\n      <i c8y-icon="exclamation-triangle" class="text-danger" style="font-size: 5em"></i>\n      <br/>\n      <span style="font-size: 20pt" class="text-danger" translate>Failed</span>\n      <br/>\n      <span translate>\n        Your rule has errors.\n      </span>\n    </div>\n  </div>\n\n  <div class="c8y-wizard-footer" ng-if="!vm.isLoading">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.close()" translate>Done</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardRuleDeploymentStep.html",t),n.put("administration_applications/appWizard/appWizardRuleDeploymentStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardRuleDeploymentStep.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <i c8y-icon="code"></i> <span translate>Create legacy smartapp</span>\n  </div>\n\n\n\n  <form name="smartAppForm" class="c8y-wizard-form">\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(smartAppForm.name)}">\n      <label for="name"><span translate>Name</span></label>\n      <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.smartApp.name" placeholder="{{\'e.g. My smart application\' | translate}}" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(smartAppForm.name)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(smartAppForm.contextPath)}">\n      <label for="contextPath"><span translate>Path</span></label>\n      <div class="input-group">\n        <span class="input-group-addon">{{vm.host}}/apps/</span>\n        <input type="text" class="form-control" id="contextPath" name="contextPath" ng-model="vm.wizardCtrl.data.smartApp.contextPath" placeholder="{{\'e.g. smart-application\' | translate}}" required ng-maxlentgh="120" uib-tooltip="{{vm.validationHints(smartAppForm.contextPath)}}" c8y-application-context-path>\n      </div>\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(\'menu\')" translate>Back</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n    <button class="btn btn-primary" ng-click="vm.create()" ng-disabled="smartAppForm.$invalid" translate>Create</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardSmartAppStep.html",t),n.put("administration_applications/appWizard/appWizardSmartAppStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardSmartAppStep.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n    <span translate>Application created</span>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <span ng-bind="vm.wizardCtrl.data.chosenMethod.label | translate"></span>\n  </div>\n\n  <div class="c8y-wizard-body">\n    <div class="text-center bottom-m">\n      <i c8y-icon="check-circle-o" class="text-success" style="font-size: 5em"></i>\n      <br/>\n      <span class="text-success" style="font-size: 20pt" translate>Application created</span>\n      <br/>\n      <span translate>\n        Application has been successfully created.\n      </span>\n    </div>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.close()" translate>Done</button>\n    <button class="btn btn-primary" ng-click="vm.open(vm.wizardCtrl.data.createdApp)" ng-if="vm.canOpenInBrowser">\n      <i c8y-icon="external-link"></i> <span translate>Open</span>\n    </button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardSuccessStep.html",t),n.put("administration_applications/appWizard/appWizardSuccessStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardSuccessStep.html",t),t='<div>\n  <div class="c8y-wizard-nav">\n      <i c8y-icon="upload"></i>\n    <span translate>Upload {{vm.wizardCtrl.data.chosenMethod.expectedExtension}} file</span>\n  </div>\n\n  <div class="c8y-wizard-form">\n    <file-picker files="vm.wizardCtrl.data.appUpload.files" multiple="false" required="true" data-disabled="vm.processingStatus.inProgress" display-drop-zone="true" drop-zone-label="\'Upload file\' | translate" processing-status="vm.processingStatus" on-file-selected="vm.createAppAndUploadArchive(vm.wizardCtrl.data.appUpload.files[0].file)" allowed-file-type="vm.wizardCtrl.data.chosenMethod.supportedFileTypes">\n    </file-picker>\n\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.goTo(\'menu\')" translate>Back</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("applications/appWizard/appWizardUploadStep.html",t),n.put("administration_applications/appWizard/appWizardUploadStep.html",t),n.put("/apps/administration/applications/appWizard/appWizardUploadStep.html",t),t='<c8y-wizard on-dismiss="$dismiss()" on-close="$close()">\n  <header>\n    <div style="font-size: 62px">\n      <span c8y-icon="c8y-modules"></span>\n    </div>\n    <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\n      Add application\n    </h4>\n  </header>\n  <steps>\n    <c8y-wizard-step step-id="menu">\n      <app-wizard-menu-step></app-wizard-menu-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="upload">\n      <app-wizard-upload-step></app-wizard-upload-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="external">\n      <app-wizard-external-step></app-wizard-external-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="clone1">\n      <app-wizard-clone1-step></app-wizard-clone1-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="clone2">\n      <app-wizard-clone2-step></app-wizard-clone2-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="smartApp">\n      <app-wizard-smart-app-step></app-wizard-smart-app-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="ruleDeployment">\n      <app-wizard-rule-deployment-step></app-wizard-rule-deployment-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="success">\n      <app-wizard-success-step></app-wizard-success-step>\n    </c8y-wizard-step>\n  </steps>\n</c8y-wizard>\n',n.put("applications/appWizard/wizard.html",t),n.put("administration_applications/appWizard/wizard.html",t),n.put("/apps/administration/applications/appWizard/wizard.html",t),t='<div>\n\n  <label style="z-index:0" ng-show="marketApps.length > 0">\n    {{ \'Built-in applications\' | translate }}\n    <i c8y-icon="info-circle" uib-popover="{{\'Applications your tenant is subscribed to\' | translate}}" popover-append-to-body="true" popover-placement="right" popover-trigger="\'mouseenter\'">\n    </i>\n  </label>\n  <ul class="list-group" style="margin-bottom:20px">\n    <li class="list-group-item" ng-repeat="application in marketApps = (applications | filter:{availability:\'MARKET\'}">\n        <input type="checkbox" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="disabledEdit">\n        {{application | humanizeAppName}}\n    </li>\n  </ul>\n\n  <label ng-show="privateApps.length > 0">\n    {{\'Custom applications\' | translate}}\n\n    <i c8y-icon="info-circle" uib-popover="{{\'Applications owned by your tenant\' | translate}}" popover-append-to-body="true" popover-placement="right" popover-trigger="\'mouseenter\'">\n    </i>\n  </label>\n  <ul class="list-group">\n    <li class="list-group-item" ng-repeat="application in privateApps = (applications | filter:{availability:\'PRIVATE\'})">\n        <input type="checkbox" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="disabledEdit">\n        {{application | humanizeAppName}}\n    </li>\n  </ul>\n\n</div>\n',n.put("applications/views/applicationAccessEditor.html",t),n.put("administration_applications/views/applicationAccessEditor.html",t),n.put("/apps/administration/applications/views/applicationAccessEditor.html",t),t='<div ng-controller="permissionsCtrl as vm" class="row card-group">\r\n  <div class="col-md-6">\r\n    <div class="card">\r\n      <div class="card-header separator">\r\n        <h4 translate>Required permissions</h4>\r\n      </div>\r\n      <div class="card-block">\r\n        <div ng-if="!vm.requiredRoles.length" class="alert alert-info">\r\n          <translate>No permissions required.</translate>\r\n        </div>\r\n        <c8y-roles-matrix ng-if="vm.requiredRoles.length" available-roles="vm.requiredRoles" selected-roles="vm.application.requiredRoles" read-only="true">\r\n        </c8y-roles-matrix>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="col-md-6">\r\n    <div class="card">\r\n      <div class="card-header separator">\r\n        <h4 translate>Provided roles</h4>\r\n      </div>\r\n      <div class="card-block">\r\n        <div ng-if="!vm.roles.length" class="alert alert-info">\r\n          <translate>No roles provided.</translate>\r\n        </div>\r\n        <c8y-roles-matrix ng-if="vm.roles.length" available-roles="vm.roles" selected-roles="vm.application.roles" read-only="true">\r\n        </c8y-roles-matrix>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',n.put("applications/views/permissions.html",t),n.put("administration_applications/views/permissions.html",t),n.put("/apps/administration/applications/views/permissions.html",t),t='<h1 ng-controller="appDetailsTitleCtrl as ctrl" class="text-truncate">\n  <span ng-bind="ctrl.app | humanizeAppName"></span>\n</h1>\n',n.put("applications/views/title.html",t),n.put("administration_applications/views/title.html",t),n.put("/apps/administration/applications/views/title.html",t)}angular.module("c8y.parts.applications").run(["$templateCache",n])}();