/* core_app-status 9.16.4 2018-11-07T09:47:24+00:00 f3088a38af4a (release/9.16.0) tip */
!function(){"use strict";function t(t,s){t.when("/subscribedApplications/:applicationId",{template:'<c8y-app-status base-path="subscribedApplications"></c8y-app-status>',icon:"heartbeat",name:s("Status"),showIf:["$routeParams","c8yInventory",function(t,s){var a="c8y_Application_"+t.applicationId;return s.list({type:a}).then(function(t){return _.isEqual(_.get(t,"length"),1)})}]}),t.when("/applications/:applicationId",{template:'<c8y-app-status base-path="applications"></c8y-app-status>',icon:"heartbeat",name:s("Status"),showIf:["$routeParams","c8yInventory",function(t,s){var a="c8y_Application_"+t.applicationId;return s.list({type:a}).then(function(t){return _.isEqual(_.get(t,"length"),1)})}]})}t.$inject=["c8yViewsProvider","gettext"],angular.module("c8y.appStatus",[]).config(t)}(),function(){"use strict";function t(t,s,a,n){function e(){i()}function i(){v.refreshingItems.appDetails=!0,n.getApplicationMO(t.applicationId).then(r)}function r(t){v.refreshingItems.appDetails=!1,v.mo=t,v.moId=t.id,c(v.mo)}function c(t){v.status=_.get(t,"c8y_Status")}function l(){return!_.isEmpty(_.get(v.mo,"c8y_Subscriptions"))}function p(){return!_.isEmpty(_.get(v.mo,"c8y_Status"))}function o(){i(),s.$broadcast("alarmListRefresh"),s.$broadcast("eventListRefresh")}function u(){return _.includes(v.refreshingItems,!0)}function m(){return a(d()?"Subscribed applications":"Own applications")}function d(){return v.basePath===b}var v=this,b="subscribedApplications",h="",g={},f="",y=!0,I={};_.assign(v,{$onInit:e,moId:h,tenantSubscriptions:g,subscriptionsVisible:l,statusVisible:p,status:f,realtime:y,refresh:o,refreshingItems:I,isRefreshing:u,breadcrumbsLabel:m})}t.$inject=["$routeParams","$scope","gettext","c8yApplication"],angular.module("c8y.appStatus").component("c8yAppStatus",{bindings:{basePath:"@"},templateUrl:"core_app-status/app-status/app-status.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){function s(){a(),n()}function a(){i.instances=t.getInstanceCounts(_.get(i.statusFragment,"details"))}function n(){i.status=_.get(i.statusFragment,"status")}function e(s){return _.find(t.status.values(),{value:s}).icon}var i=this,r={};_.assign(i,{$onInit:s,instances:r,getStatusIcon:e})}t.$inject=["c8yApplication"],angular.module("c8y.appStatus").component("c8yAppInstances",{bindings:{statusFragment:"<"},templateUrl:"core_app-status/app-instances/app-instances.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){function s(){n()}function a(s){return _.find(t.status.values(),{value:s}).icon}function n(){e.subscriptionsList=t.getSubscriptionsList(e.mo)}var e=this;_.assign(e,{$onInit:s,getStatusIcon:a})}t.$inject=["c8yApplication"],angular.module("c8y.appStatus").component("c8yAppTenantSubscriptionsList",{bindings:{mo:"<"},templateUrl:"core_app-status/app-tenant-subscriptions-list/app-tenant-subscriptions-list.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(){function t(){s()}function s(){a.options={orderMode:"ACTIVE_FIRST",status:{ACTIVE:!0,ACKNOWLEDGED:!1,CLEARED:!1},types:[],source:a.sourceId,resolved:!1},a.activeSeverities={CRITICAL:!0,MAJOR:!0,MINOR:!0,WARNING:!0}}var a=this;_.assign(a,{$onInit:t})}angular.module("c8y.appStatus").component("c8yAppAlarms",{bindings:{sourceId:"<",realtime:"<",refreshLoading:"=",hideDevice:"<"},templateUrl:"core_app-status/app-alarms/app-alarms.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(){function t(){_.assign(s.filter,{deviceId:s.sourceId})}var s=this,a={};_.assign(s,{$onInit:t,filter:a})}angular.module("c8y.appStatus").component("c8yAppEvents",{bindings:{sourceId:"<",realtime:"<",refreshLoading:"=",hideDevice:"<"},templateUrl:"core_app-status/app-events/app-events.html",controller:t,controllerAs:"vm"})}(),function(){"use strict";function t(t){var s;s='<div class="legend form-block top-m-xxl">{{\'Alarms\' | translate}}</div>\r\n<div class="row split-scroll" style="max-height: 220px">\r\n  <div class="col-md-12 scroll-column">\r\n    <ul class="nav c8y-nav-stacked inner-scroll">\r\n      <c8y-alarm-list class="alarm-list" active-severities="vm.activeSeverities" filter="vm.options" realtime="vm.realtime" hide-header-actions="true" refresh-loading="vm.refreshLoading" hide-device="vm.hideDevice">\r\n      </c8y-alarm-list>\r\n    </ul>\r\n  </div>\r\n</div>',t.put("app-status/app-alarms/app-alarms.html",s),t.put("core_app-status/app-alarms/app-alarms.html",s),t.put("/apps/core/app-status/app-alarms/app-alarms.html",s),s='<div class="legend form-block top-m-xxl">{{\'Events\' | translate}}</div>\r\n\r\n<div class="row split-scroll" style="max-height: 220px">\r\n  <div class="col-md-12 scroll-column">\r\n    <ul class="nav c8y-nav-stacked inner-scroll">\r\n      <c8y-event-list filters="vm.filter" realtime="vm.realtime" hide-header-actions="true" refresh-loading="vm.refreshLoading" hide-device="vm.hideDevice">\r\n      </c8y-event-list>\r\n    </ul>\r\n  </div>\r\n</div>\r\n\r\n',t.put("app-status/app-events/app-events.html",s),t.put("core_app-status/app-events/app-events.html",s),t.put("/apps/core/app-status/app-events/app-events.html",s),s='<div class="legend form-block">\r\n  {{\'Instances\' | translate}}\r\n</div>\r\n\r\n<div class="card-group interact-list">\r\n  <div class="col-xs-12 col-sm-6 col-md-5 col-lg-3">\r\n    <div class="card col-xs-12 col-sm-6 col-md-12 col-lg-12">\r\n      <div class="card-block">\r\n        <div class="list-item-icon">\r\n          <i c8y-icon="{{vm.getStatusIcon(vm.status)}}" uib-tooltip="{{vm.status | translate}}" tooltip-placement="right"></i>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Active</label> {{vm.instances.active || 0}}\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Unhealthy</label> {{vm.instances.unhealthy || 0}}\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Desired</label> {{vm.instances.desired || 0}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',t.put("app-status/app-instances/app-instances.html",s),t.put("core_app-status/app-instances/app-instances.html",s),t.put("/apps/core/app-status/app-instances/app-instances.html",s),s='<c8y-breadcrumbs-set>\r\n  <c8y-breadcrumbs-item path="#{{vm.basePath}}" label="{{vm.breadcrumbsLabel() | translate}}" icon="c8y-modules">\r\n  </c8y-breadcrumbs-item>\r\n</c8y-breadcrumbs-set>\r\n\r\n<div class="row">\r\n  <div class="col-xs-12 col-sm-12 col-md-8 col-lg-7">\r\n    <div class="card">\r\n      <div class="card-block">\r\n        <c8y-ui-action-bar-set>\r\n          <c8y-realtime-switch state="vm.realtime"></c8y-realtime-switch>\r\n\r\n          <a href="" class="btn btn-link" title="{{\'Refresh status page\' | translate}}" ng-click="vm.refresh()">\r\n            <i c8y-icon="refresh" ng-class="{\'fa-spin\': vm.isRefreshing()}"></i>\r\n            <span translate>Reload</span>\r\n          </a>\r\n        </c8y-ui-action-bar-set>\r\n\r\n        <c8y-app-instances status-fragment="vm.status" ng-if="vm.statusVisible()"></c8y-app-instances>\r\n\r\n        <c8y-app-tenant-subscriptions-list mo="vm.mo" ng-if="vm.subscriptionsVisible()"></c8y-app-tenant-subscriptions-list>\r\n\r\n        <div ng-if="vm.moId">\r\n          <c8y-app-alarms hide-device="true" realtime="vm.realtime" source-id="vm.moId" refresh-loading="vm.refreshingItems.alarms"></c8y-app-alarms>\r\n\r\n          <c8y-app-events hide-device="true" realtime="vm.realtime" source-id="vm.moId" refresh-loading="vm.refreshingItems.events"></c8y-app-events>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',t.put("app-status/app-status/app-status.html",s),t.put("core_app-status/app-status/app-status.html",s),t.put("/apps/core/app-status/app-status/app-status.html",s),s='<div class="legend form-block top-m-xxl">\r\n  {{\'Subscribed tenants\' | translate}}\r\n</div>\r\n\r\n<div class="card-group interact-list">\r\n  <div class="col-xs-12 col-sm-6 col-md-5 col-lg-3" ng-repeat="subscription in vm.subscriptionsList | orderBy:\'tenantName\'">\r\n    <div class="card col-xs-12 col-sm-6 col-md-12 col-lg-12">\r\n      <div class="card-block">\r\n        <div class="list-item-icon">\r\n          <i c8y-icon="{{vm.getStatusIcon(subscription.status)}}" uib-tooltip="{{subscription.status | translate}}" tooltip-placement="right"></i>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Active</label> {{subscription.active || 0}}\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Unhealthy</label> {{subscription.unhealthy || 0}}\r\n        </div>\r\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 text-truncate">\r\n          <label class="small" translate>Desired</label> {{subscription.desired || 0}}\r\n        </div>\r\n        <div class="card-title text-truncate col-xs-12 col-sm-6 col-md-4 col-lg-2" title="{{subscription.tenantName | translate}}">\r\n          {{subscription.tenantName | translate}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>',t.put("app-status/app-tenant-subscriptions-list/app-tenant-subscriptions-list.html",s),t.put("core_app-status/app-tenant-subscriptions-list/app-tenant-subscriptions-list.html",s),t.put("/apps/core/app-status/app-tenant-subscriptions-list/app-tenant-subscriptions-list.html",s)}angular.module("c8y.appStatus").run(["$templateCache",t])}();